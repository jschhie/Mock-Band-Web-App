{% extends 'base.html' %}

{% block title %}
    Unofficial BTS | Store
{% endblock %}

{% block content %}
<section>
    <!-- MUSIC SECTION -->
    <h2 class="section-header">music</h2>
    <div class="shop-items-all">
        {% for album in albums %}
        <div class="shop-item">
            <span class="shop-item-title">{{album.prod_title}}</span>
            <img class="shop-item-image" src={{album.img_src}} height="100px"/>
            <div class="shop-item-details">
                <span class="shop-item-price">{{album.unit_price}}</span>
                <button title="Add to Cart" class="btn general-btn shop-item-btn" type="button" onclick="addToCart(this)">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bag-plus-fill" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M10.5 3.5a2.5 2.5 0 0 0-5 0V4h5v-.5zm1 0V4H15v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4h3.5v-.5a3.5 3.5 0 1 1 7 0zM8.5 8a.5.5 0 0 0-1 0v1.5H6a.5.5 0 0 0 0 1h1.5V12a.5.5 0 0 0 1 0v-1.5H10a.5.5 0 0 0 0-1H8.5V8z"/>
                    </svg>
                </button>
            </div>
            <button title="View Album" class="shop-item-details btn" data-bs-toggle="modal" data-bs-target={{ "#album" + loop.index|string }}>
                View Album
            </button>
        </div>
        {% endfor %}
</section>

<!-- MERCH SECTION -->
<section>
    <h2 class="section-header">merch</h2>
    <div class="shop-items-all">
        {% for merch_item in merch %}
        <div class="shop-item">
            <span class="shop-item-title">{{merch_item.prod_title}}</span>
            <img class="shop-item-image" type="image/png" src={{merch_item.img_src}} height="100px"/>
            <div class="shop-item-details row">
                <span class="shop-item-price col">{{merch_item.unit_price}}</span>
                {% if 'Black' in merch_item.prod_title %}
                <select class="form-control col size-option" id="blackHoodSize">
                {% else %}
                <select class="form-control col size-option" id="whiteHoodSize">
                {% endif %}
                    <option value="Small" selected>S</option>
                    <option value="Medium">M</option>
                    <option value="Large">L</option>
                </select>
                <button title="Add to Cart" type="button" class="btn general-btn shop-item-btn col" onclick="addToCart(this)">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bag-plus-fill" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M10.5 3.5a2.5 2.5 0 0 0-5 0V4h5v-.5zm1 0V4H15v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4h3.5v-.5a3.5 3.5 0 1 1 7 0zM8.5 8a.5.5 0 0 0-1 0v1.5H6a.5.5 0 0 0 0 1h1.5V12a.5.5 0 0 0 1 0v-1.5H10a.5.5 0 0 0 0-1H8.5V8z"/>
                    </svg>
                </button>
            </div>
            {% if 'Black' in merch_item.prod_title %}
            <button title="View Product" class="shop-item-details btn" data-bs-toggle="modal" data-bs-target="#blackhood">
            {% else %}
            <button title="View Product" class="shop-item-details btn" data-bs-toggle="modal" data-bs-target="#whitehood">
            {% endif %}
                View Product
            </button>
        </div>
        {% endfor %}
    </div>
</section>



<!-- ALBUMS 1, 2, 3, 4 MODALS -->
{% for album in albums %}
<div class="modal fade" id={{ "album" + loop.index|string }} tabindex="-1" aria-labelledby={{ "album" + loop.index|string + "Modal" }} aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id={{ "album" + loop.index|string + "Label" }}>{{album.prod_title}} (Album)</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- GALLERY -->
                <img src={{album.img_src}} width="160px" height="160px" class="modal-img shadow">
                <img src={{album.img_src}} width="80px" class="preview-img" style="border-color: black;" onclick="showImg(this)">
                <img src={{album.alt_src}} width="80px" height="80px" class="preview-img" onclick="showImg(this)">

                <div class="modal-details">
                    <p class="modal-subtitle">DESCRIPTION</p>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                    <span class="row">
                        <p class="modal-subtitle col">PRICE</p>
                        <p class="col">{{album.unit_price}}</p>
                    </span>
                    <span class="row">
                        <p class="modal-subtitle col">RELEASED</p>
                        <p class="col">{{album.release_date}}</p>
                    </span>
                    <span class="row">
                        <p class="modal-subtitle col">WEIGHT</p>
                        <p class="col">{{album.weight}}</p>
                    </span>
                    <span class="row">
                        <p class="modal-subtitle col">SPECS</p>
                        <p class="col">{{album.specs}}</p>
                    </span>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
{% endfor %}



<!-- BLACK / WHITE HOOD MODALS -->
{% for merch_item in merch %}

{% if 'Black' in merch_item.prod_title %}
<div class="modal fade" id="blackhood" tabindex="-1" aria-labelledby="blackhoodModal" aria-hidden="true">
{% else %}
<div class="modal fade" id="whitehood" tabindex="-1" aria-labelledby="whitehoodModal" aria-hidden="true">
{% endif %}

    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                {% if 'Black' in merch_item.prod_title %}
                <h1 class="modal-title fs-5" id="blackhoodLabel">{{merch_item.prod_title}}</h1>
                {% else %}
                <h1 class="modal-title fs-5" id="whitehoodLabel">{{merch_item.prod_title}}</h1>
                {% endif %}
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <img src={{merch_item.img_src}} width="150px" class="modal-img shadow">
                <div class="modal-details" style="display:inline-block;">
                    <p class="modal-subtitle">DESCRIPTION</p>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                    <span class="row">
                        <p class="modal-subtitle col">PRICE</p>
                        <p class="col">{{merch_item.unit_price}}</p>
                    </span>
                    <span class="row">
                        <p class="modal-subtitle col">MATERIAL</p>
                        <p class="col">{{merch_item.material}}.<br>Exclusive of design.</p>
                    </span>
                    <span class="row">
                        <p class="modal-subtitle col">MADE IN</p>
                        <p class="col">{{merch_item.origin}}</p>
                    </span>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
{% endfor %}



<!-- CART SECTION -->
<section>
    
    <!-- SHOPPING CART OFFCANVAS -->
    <div class="center-btn">
        <button title="View Cart" class="btn view-cart-btn" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight" onclick="updateCartTotal()">
            VIEW CART 
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cart-fill" viewBox="0 0 16 16">
                <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
            </svg>
            <span class="badge rounded-pill text-bg-dark cart-notif">0</span>
        </button>
    </div>

    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
        
        <div class="offcanvas-header">
          <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>

        <div class="offcanvas-body">
            <h2 class="section-header">cart</h2>
            <!-- CART HEADER ROW -->
            <div class="cart-row">
                <span class="cart-item cart-header cart-type-header cart-column">ITEM</span>
                <span class="cart-price cart-header cart-column">PRICE</span>
                <span class="cart-amount cart-header cart-column">QUANTITY</span>
            </div>

            <!-- EMPTY CART TEXT -->
            <div id="empty-merch-text">
                Your cart is currently empty.
                <br>
                Continue browsing <button class="button arena-link"  data-bs-dismiss="offcanvas" style="font-family:'Syne', 'Times';">here</button>
            </div>

            <!-- ALL CART ITEMS -->
            <div class="cart-items-all">
                <!-- Cart items inserted interactively here -->
            </div>
            
            <!-- CHECKOUT -->
            <div class="cart-total">
                <span class="cart-total-label">TOTAL</span>
                <span id="merch-total-price" class="cart-total-price">$0.00</span>
            </div>
            <div class="submit-cart" id="checkout-merch-btn">
                <button type="button" class="icon-link icon-link-hover purchase-btn btn" onclick="startCheckout(this, 'merch')">
                    CHECKOUT
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
                    </svg>
                </button>
            </div>
        </div>
      </div>

</section>

<br>

<script>
    // function call when page loads 
    toggleEmptyCart("merch-total-price", "empty-merch-text", "checkout-merch-btn");
</script>

{% endblock %}